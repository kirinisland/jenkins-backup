Started by timer
Running as SYSTEM
Building in workspace /var/root/.jenkins/workspace/hot_user
using credential root
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url git@github.com:kirinisland/zaoci-tool.git # timeout=10
Fetching upstream changes from git@github.com:kirinisland/zaoci-tool.git
 > git --version # timeout=10
using GIT_SSH to set credentials 
 > git fetch --tags --force --progress -- git@github.com:kirinisland/zaoci-tool.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
Commit message: "Update job with total count"
 > git rev-list --no-walk cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
[hot_user] $ /bin/sh -xe /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/jenkins793515294497050738.sh
+ python3 jobs/hot_user.py --count 25
Hot users after date: 2020-08-04 00:00:00
点赞最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-08-04 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-likeCount
[('04fbe0c3e3', 11, 6, 2, 3), ('c9e9403703', 5, 4, 0, 1), ('e854ee4e18', 5, 3, 0, 2), ('1731de9260', 4, 3, 0, 1), ('eb8579289a', 4, 3, 0, 1), ('f8da153c27', 4, 3, 0, 1), ('7e39dfea3a', 7, 3, 0, 4), ('561fe5c25f', 4, 2, 1, 1), ('f8da153c27', 3, 2, 0, 1), ('f8da153c27', 6, 2, 2, 2), ('d4acd875a5', 3, 2, 1, 0), ('a66515e322', 4, 2, 1, 1), ('181952b4bf', 5, 2, 2, 1), ('26c033357a', 3, 2, 1, 0), ('8eef9ee690', 3, 1, 0, 2), ('397f03568c', 0, 1, 0, -1), ('91b1a2cb8c', 1, 1, 0, 0), ('1e0923140a', 1, 1, 0, 0), ('e98f327786', 2, 1, 0, 1), ('58f68b0e84', 1, 1, 0, 0), ('b4407d110d', 1, 1, 0, 0), ('b4407d110d', 1, 1, 0, 0), ('cb93241614', 1, 1, 0, 0), ('181952b4bf', 1, 1, 0, 0), ('495b52e760', 1, 1, 0, 0)]

评论最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-08-04 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-commentCount
[('f8da153c27', 6, 2, 2, 2), ('f8da153c27', 2, 0, 2, 0), ('181952b4bf', 5, 2, 2, 1), ('04fbe0c3e3', 11, 6, 2, 3), ('561fe5c25f', 4, 2, 1, 1), ('d4acd875a5', 3, 2, 1, 0), ('a66515e322', 4, 2, 1, 1), ('26c033357a', 3, 2, 1, 0), ('26c033357a', 2, 1, 1, 0), ('8eef9ee690', 3, 1, 0, 2), ('3456831d65', 0, 0, 0, 0), ('e854ee4e18', 5, 3, 0, 2), ('1731de9260', 4, 3, 0, 1), ('eb8579289a', 4, 3, 0, 1), ('397f03568c', 0, 1, 0, -1), ('4bc4ab71e4', 0, 0, 0, 0), ('91b1a2cb8c', 1, 1, 0, 0), ('f8da153c27', 3, 2, 0, 1), ('1e0923140a', 1, 1, 0, 0), ('e98f327786', 2, 1, 0, 1), ('f8da153c27', 4, 3, 0, 1), ('f8da153c27', 0, 0, 0, 0), ('58f68b0e84', 1, 1, 0, 0), ('1ebb3d9051', 0, 0, 0, 0), ('90edc57f55', 0, 0, 0, 0)]

收藏最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-08-04 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-bookmarkCount
[('7e39dfea3a', 7, 3, 0, 4), ('04fbe0c3e3', 11, 6, 2, 3), ('8eef9ee690', 3, 1, 0, 2), ('e854ee4e18', 5, 3, 0, 2), ('f8da153c27', 6, 2, 2, 2), ('548aa74e9a', 3, 1, 0, 2), ('1731de9260', 4, 3, 0, 1), ('eb8579289a', 4, 3, 0, 1), ('561fe5c25f', 4, 2, 1, 1), ('f8da153c27', 3, 2, 0, 1), ('e98f327786', 2, 1, 0, 1), ('f8da153c27', 4, 3, 0, 1), ('a66515e322', 4, 2, 1, 1), ('181952b4bf', 5, 2, 2, 1), ('c9e9403703', 5, 4, 0, 1), ('397f03568c', 0, 1, 0, -1), ('3456831d65', 0, 0, 0, 0), ('4bc4ab71e4', 0, 0, 0, 0), ('91b1a2cb8c', 1, 1, 0, 0), ('1e0923140a', 1, 1, 0, 0), ('f8da153c27', 0, 0, 0, 0), ('f8da153c27', 2, 0, 2, 0), ('58f68b0e84', 1, 1, 0, 0), ('d4acd875a5', 3, 2, 1, 0), ('1ebb3d9051', 0, 0, 0, 0)]
{'04fbe0c3e3': (33, 18, 6, 9, {'likeCount', 'commentCount', 'bookmarkCount'}), 'c9e9403703': (10, 8, 0, 2, {'likeCount', 'bookmarkCount'}), 'e854ee4e18': (15, 9, 0, 6, {'likeCount', 'commentCount', 'bookmarkCount'}), '1731de9260': (12, 9, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), 'eb8579289a': (12, 9, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), 'f8da153c27': (43, 21, 10, 12, {'likeCount', 'commentCount', 'bookmarkCount'}), '7e39dfea3a': (14, 6, 0, 8, {'likeCount', 'bookmarkCount'}), '561fe5c25f': (12, 6, 3, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), 'd4acd875a5': (9, 6, 3, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), 'a66515e322': (12, 6, 3, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '181952b4bf': (16, 7, 6, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '26c033357a': (8, 5, 3, 0, {'likeCount', 'commentCount'}), '8eef9ee690': (9, 3, 0, 6, {'likeCount', 'commentCount', 'bookmarkCount'}), '397f03568c': (0, 3, 0, -3, {'likeCount', 'commentCount', 'bookmarkCount'}), '91b1a2cb8c': (3, 3, 0, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), '1e0923140a': (3, 3, 0, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), 'e98f327786': (6, 3, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '58f68b0e84': (3, 3, 0, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), 'b4407d110d': (2, 2, 0, 0, {'likeCount'}), 'cb93241614': (1, 1, 0, 0, {'likeCount'}), '495b52e760': (1, 1, 0, 0, {'likeCount'}), '3456831d65': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'}), '4bc4ab71e4': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'}), '1ebb3d9051': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'}), '90edc57f55': (0, 0, 0, 0, {'commentCount'}), '548aa74e9a': (3, 1, 0, 2, {'bookmarkCount'})}
Total hot users count after date: 2020-08-04 00:00:00: 26
[{'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': 'be82dace38'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': 'd26fcf0df5'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': 'a0ba0da90a'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '035c84a77b'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': 'c1d20a1cbc'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '0a5ecc24cb'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': 'b8e63be5a4'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': 'f3c7401937'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': 'f0be237e9a'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': 'efaa53b0c4'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '852f1c6d71'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '8a3d6f4722'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '1c41d216cf'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '6310353bb1'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '47fc1faa61'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '3d7f619e86'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '168353b974'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '1af79345d6'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': 'e444785f75'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': 'b002acf3da'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '56c820d6aa'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '1add744dc0'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '684037f3b0'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': 'f4e36e55f5'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '67502f50a1'}}, {'success': {'createdAt': '2020-08-11 20:19:10', 'objectId': '067130bfc9'}}]
Finished: SUCCESS
