Started by timer
Running as SYSTEM
Building in workspace /var/root/.jenkins/workspace/hot_user
using credential root
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url git@github.com:kirinisland/zaoci-tool.git # timeout=10
Fetching upstream changes from git@github.com:kirinisland/zaoci-tool.git
 > git --version # timeout=10
using GIT_SSH to set credentials 
 > git fetch --tags --force --progress -- git@github.com:kirinisland/zaoci-tool.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
Commit message: "Update job with total count"
 > git rev-list --no-walk cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
[hot_user] $ /bin/sh -xe /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/jenkins803737769770501320.sh
+ python3 jobs/hot_user.py --count 25
Hot users after date: 2020-07-26 00:00:00
点赞最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-26 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-likeCount
[('a66515e322', 10, 5, 3, 2), ('cd32d80f90', 7, 5, 1, 1), ('6533a667a4', 8, 4, 3, 1), ('0388a01dc6', 5, 4, 1, 0), ('eb8579289a', 5, 4, 0, 1), ('9ac0ff71fc', 3, 4, 0, -1), ('cd32d80f90', 8, 3, 4, 1), ('e2f31cdddd', 4, 3, 0, 1), ('1f71e5548f', 5, 3, 0, 2), ('120322fb86', 4, 3, 0, 1), ('6b9fd674b5', 3, 3, 0, 0), ('cd32d80f90', 4, 3, 0, 1), ('47d8eb4fe3', 3, 2, 0, 1), ('181952b4bf', 3, 2, 0, 1), ('e260a83635', 3, 2, 0, 1), ('58f68b0e84', 3, 2, 1, 0), ('cd32d80f90', 2, 2, 0, 0), ('799c422540', 2, 2, 0, 0), ('cd32d80f90', 0, 2, 0, -2), ('492ac880d0', 4, 2, 0, 2), ('492ac880d0', 3, 2, 0, 1), ('492ac880d0', 3, 2, 0, 1), ('4ac37e89bf', 3, 1, 0, 2), ('c7eecb433c', 1, 1, 0, 0), ('5acd18807f', 1, 1, 0, 0)]

评论最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-26 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-commentCount
[('cd32d80f90', 8, 3, 4, 1), ('6533a667a4', 8, 4, 3, 1), ('a66515e322', 10, 5, 3, 2), ('0388a01dc6', 5, 4, 1, 0), ('58f68b0e84', 3, 2, 1, 0), ('cd32d80f90', 7, 5, 1, 1), ('47d8eb4fe3', 3, 2, 0, 1), ('4ac37e89bf', 3, 1, 0, 2), ('c7eecb433c', 1, 1, 0, 0), ('5acd18807f', 1, 1, 0, 0), ('0388a01dc6', 1, 1, 0, 0), ('05b80cbc3d', 1, 1, 0, 0), ('181952b4bf', 3, 2, 0, 1), ('e260a83635', 3, 2, 0, 1), ('ccfcee616a', 0, 0, 0, 0), ('34d4dcb0f9', 1, 1, 0, 0), ('58bd4a685e', 1, 1, 0, 0), ('cd32d80f90', 1, 1, 0, 0), ('58f68b0e84', 2, 1, 0, 1), ('cd32d80f90', 2, 2, 0, 0), ('e2f31cdddd', 4, 3, 0, 1), ('1f71e5548f', 5, 3, 0, 2), ('0cf06a7086', 1, 1, 0, 0), ('120322fb86', 4, 3, 0, 1), ('47d8eb4fe3', 0, 0, 0, 0)]

收藏最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-26 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-bookmarkCount
[('4ac37e89bf', 3, 1, 0, 2), ('a66515e322', 10, 5, 3, 2), ('1f71e5548f', 5, 3, 0, 2), ('98db299a8f', 3, 1, 0, 2), ('492ac880d0', 4, 2, 0, 2), ('6533a667a4', 8, 4, 3, 1), ('47d8eb4fe3', 3, 2, 0, 1), ('181952b4bf', 3, 2, 0, 1), ('e260a83635', 3, 2, 0, 1), ('58f68b0e84', 2, 1, 0, 1), ('cd32d80f90', 8, 3, 4, 1), ('e2f31cdddd', 4, 3, 0, 1), ('120322fb86', 4, 3, 0, 1), ('cd32d80f90', 7, 5, 1, 1), ('eb8579289a', 5, 4, 0, 1), ('492ac880d0', 3, 2, 0, 1), ('cd32d80f90', 4, 3, 0, 1), ('492ac880d0', 3, 2, 0, 1), ('0388a01dc6', 5, 4, 1, 0), ('9ac0ff71fc', 3, 4, 0, -1), ('79051f8ed3', 0, 1, 0, -1), ('cd32d80f90', 0, 2, 0, -2), ('c7eecb433c', 1, 1, 0, 0), ('5acd18807f', 1, 1, 0, 0), ('0388a01dc6', 1, 1, 0, 0)]
{'a66515e322': (30, 15, 9, 6, {'likeCount', 'commentCount', 'bookmarkCount'}), 'cd32d80f90': (58, 39, 15, 4, {'likeCount', 'commentCount', 'bookmarkCount'}), '6533a667a4': (24, 12, 9, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '0388a01dc6': (17, 14, 3, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), 'eb8579289a': (10, 8, 0, 2, {'likeCount', 'bookmarkCount'}), '9ac0ff71fc': (6, 8, 0, -2, {'likeCount', 'bookmarkCount'}), 'e2f31cdddd': (12, 9, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '1f71e5548f': (15, 9, 0, 6, {'likeCount', 'commentCount', 'bookmarkCount'}), '120322fb86': (12, 9, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '6b9fd674b5': (3, 3, 0, 0, {'likeCount'}), '47d8eb4fe3': (9, 6, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '181952b4bf': (9, 6, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), 'e260a83635': (9, 6, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '58f68b0e84': (10, 6, 2, 2, {'likeCount', 'commentCount', 'bookmarkCount'}), '799c422540': (2, 2, 0, 0, {'likeCount'}), '492ac880d0': (20, 12, 0, 8, {'likeCount', 'bookmarkCount'}), '4ac37e89bf': (9, 3, 0, 6, {'likeCount', 'commentCount', 'bookmarkCount'}), 'c7eecb433c': (3, 3, 0, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), '5acd18807f': (3, 3, 0, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), '05b80cbc3d': (1, 1, 0, 0, {'commentCount'}), 'ccfcee616a': (0, 0, 0, 0, {'commentCount'}), '34d4dcb0f9': (1, 1, 0, 0, {'commentCount'}), '58bd4a685e': (1, 1, 0, 0, {'commentCount'}), '0cf06a7086': (1, 1, 0, 0, {'commentCount'}), '98db299a8f': (3, 1, 0, 2, {'bookmarkCount'}), '79051f8ed3': (0, 1, 0, -1, {'bookmarkCount'})}
Total hot users count after date: 2020-07-26 00:00:00: 26
[{'success': {'createdAt': '2020-08-02 20:19:51', 'objectId': '719f5be93a'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '2f52313ee2'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '45c87f45e2'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '8efdb4b132'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '2e25d3bd2a'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '0c5c2165e1'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '8e271deee3'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '3b1fd7b8f9'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': 'b257f8056b'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': 'ce3f3d9c5e'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '63c8e07bb0'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': 'd653378e36'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': 'e9198dc50b'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': 'ec62dcef3c'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '67ba6dc941'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': 'ff6fe4357f'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': 'a3b8461303'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '4ec5cfd062'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '540251b1cc'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': 'b22896f68d'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '71633bafa8'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '39a1e94656'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '491beb2c09'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': 'b0cde511da'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '4b453585bb'}}, {'success': {'createdAt': '2020-08-02 20:19:52', 'objectId': '2e49a0fc84'}}]
Finished: SUCCESS
