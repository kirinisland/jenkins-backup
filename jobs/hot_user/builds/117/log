Started by timer
Running as SYSTEM
Building in workspace /var/root/.jenkins/workspace/hot_user
using credential root
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url git@github.com:kirinisland/zaoci-tool.git # timeout=10
Fetching upstream changes from git@github.com:kirinisland/zaoci-tool.git
 > git --version # timeout=10
using GIT_SSH to set credentials 
 > git fetch --tags --force --progress -- git@github.com:kirinisland/zaoci-tool.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
Commit message: "Update job with total count"
 > git rev-list --no-walk cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
[hot_user] $ /bin/sh -xe /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/jenkins1810267784083471312.sh
+ python3 jobs/hot_user.py --count 25
Hot users after date: 2020-07-23 00:00:00
点赞最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-23 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-likeCount
[('6533a667a4', 6, 5, 0, 1), ('a66515e322', 10, 5, 3, 2), ('a66515e322', 7, 4, 2, 1), ('6533a667a4', 6, 4, 1, 1), ('0388a01dc6', 5, 4, 1, 0), ('fb582eca76', 7, 3, 2, 2), ('2b08231f3a', 3, 3, 0, 0), ('cd32d80f90', 8, 3, 4, 1), ('e2f31cdddd', 4, 3, 0, 1), ('1f71e5548f', 5, 3, 0, 2), ('120322fb86', 4, 3, 0, 1), ('cd32d80f90', 3, 3, 0, 0), ('a2f1710d52', 2, 2, 0, 0), ('47d8eb4fe3', 3, 2, 0, 1), ('003366f929', 3, 2, 0, 1), ('e854ee4e18', 3, 2, 0, 1), ('181952b4bf', 3, 2, 0, 1), ('e260a83635', 3, 2, 0, 1), ('ccfcee616a', 4, 2, 2, 0), ('58f68b0e84', 3, 2, 1, 0), ('cd32d80f90', 2, 2, 0, 0), ('cd32d80f90', 0, 2, 0, -2), ('22cf48f32f', 1, 1, 0, 0), ('fdf692f401', 2, 1, 1, 0), ('7fc0355355', 1, 1, 0, 0)]

评论最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-23 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-commentCount
[('cd32d80f90', 8, 3, 4, 1), ('a66515e322', 10, 5, 3, 2), ('a66515e322', 7, 4, 2, 1), ('fb582eca76', 7, 3, 2, 2), ('ccfcee616a', 4, 2, 2, 0), ('fdf692f401', 2, 1, 1, 0), ('725a687525', 1, 0, 1, 0), ('6533a667a4', 6, 4, 1, 1), ('0388a01dc6', 5, 4, 1, 0), ('58f68b0e84', 3, 2, 1, 0), ('22cf48f32f', 1, 1, 0, 0), ('181952b4bf', 0, 0, 0, 0), ('6533a667a4', 6, 5, 0, 1), ('c9f0bae0f8', 0, 0, 0, 0), ('e854ee4e18', 0, 0, 0, 0), ('b12c14a65c', 0, 0, 0, 0), ('7fc0355355', 1, 1, 0, 0), ('725a687525', 1, 0, 0, 1), ('725a687525', 0, 0, 0, 0), ('a2f1710d52', 2, 2, 0, 0), ('314124ce49', 0, 0, 0, 0), ('181952b4bf', 0, 0, 0, 0), ('3677667398', 0, 0, 0, 0), ('2b08231f3a', 3, 3, 0, 0), ('9eac8db707', 0, 0, 0, 0)]

收藏最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-23 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-bookmarkCount
[('fb582eca76', 7, 3, 2, 2), ('4ac37e89bf', 3, 1, 0, 2), ('a66515e322', 10, 5, 3, 2), ('1f71e5548f', 5, 3, 0, 2), ('6533a667a4', 6, 5, 0, 1), ('725a687525', 1, 0, 0, 1), ('a66515e322', 7, 4, 2, 1), ('6533a667a4', 6, 4, 1, 1), ('47d8eb4fe3', 3, 2, 0, 1), ('003366f929', 3, 2, 0, 1), ('e854ee4e18', 3, 2, 0, 1), ('181952b4bf', 3, 2, 0, 1), ('e260a83635', 3, 2, 0, 1), ('cd32d80f90', 8, 3, 4, 1), ('e2f31cdddd', 4, 3, 0, 1), ('120322fb86', 4, 3, 0, 1), ('c9f0bae0f8', 0, 0, 0, 0), ('a2f1710d52', 2, 2, 0, 0), ('0388a01dc6', 5, 4, 1, 0), ('cd32d80f90', 0, 2, 0, -2), ('22cf48f32f', 1, 1, 0, 0), ('181952b4bf', 0, 0, 0, 0), ('e854ee4e18', 0, 0, 0, 0), ('fdf692f401', 2, 1, 1, 0), ('b12c14a65c', 0, 0, 0, 0)]
{'6533a667a4': (36, 27, 3, 6, {'commentCount', 'likeCount', 'bookmarkCount'}), 'a66515e322': (51, 27, 15, 9, {'commentCount', 'likeCount', 'bookmarkCount'}), '0388a01dc6': (15, 12, 3, 0, {'commentCount', 'likeCount', 'bookmarkCount'}), 'fb582eca76': (21, 9, 6, 6, {'commentCount', 'likeCount', 'bookmarkCount'}), '2b08231f3a': (6, 6, 0, 0, {'commentCount', 'likeCount'}), 'cd32d80f90': (29, 18, 12, -1, {'commentCount', 'likeCount', 'bookmarkCount'}), 'e2f31cdddd': (8, 6, 0, 2, {'likeCount', 'bookmarkCount'}), '1f71e5548f': (10, 6, 0, 4, {'likeCount', 'bookmarkCount'}), '120322fb86': (8, 6, 0, 2, {'likeCount', 'bookmarkCount'}), 'a2f1710d52': (6, 6, 0, 0, {'commentCount', 'likeCount', 'bookmarkCount'}), '47d8eb4fe3': (6, 4, 0, 2, {'likeCount', 'bookmarkCount'}), '003366f929': (6, 4, 0, 2, {'likeCount', 'bookmarkCount'}), 'e854ee4e18': (6, 4, 0, 2, {'commentCount', 'likeCount', 'bookmarkCount'}), '181952b4bf': (6, 4, 0, 2, {'commentCount', 'likeCount', 'bookmarkCount'}), 'e260a83635': (6, 4, 0, 2, {'likeCount', 'bookmarkCount'}), 'ccfcee616a': (8, 4, 4, 0, {'commentCount', 'likeCount'}), '58f68b0e84': (6, 4, 2, 0, {'commentCount', 'likeCount'}), '22cf48f32f': (3, 3, 0, 0, {'commentCount', 'likeCount', 'bookmarkCount'}), 'fdf692f401': (6, 3, 3, 0, {'commentCount', 'likeCount', 'bookmarkCount'}), '7fc0355355': (2, 2, 0, 0, {'commentCount', 'likeCount'}), '725a687525': (3, 0, 1, 2, {'commentCount', 'bookmarkCount'}), 'c9f0bae0f8': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'}), 'b12c14a65c': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'}), '314124ce49': (0, 0, 0, 0, {'commentCount'}), '3677667398': (0, 0, 0, 0, {'commentCount'}), '9eac8db707': (0, 0, 0, 0, {'commentCount'}), '4ac37e89bf': (3, 1, 0, 2, {'bookmarkCount'})}
Total hot users count after date: 2020-07-23 00:00:00: 27
[{'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '4ebd9a6462'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '4cae41fde8'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '7fa86056a0'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': 'e24ae99411'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': 'e7340e1ea5'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '50a2548456'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '219f25b9ad'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '923719fe9f'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '288b554d06'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '994b3529d8'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '83f7a3dd52'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '2cfac194ce'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '17eb33e801'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '43e115e84a'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': 'e0cf9df62d'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '21e078bba9'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '74c7573a3d'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': 'd71c2adad1'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '64f64ba1ff'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '26eeaf7c77'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': 'add4240f5f'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '16c0d228f4'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '651193425b'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '138ca99d11'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': '4d566c766d'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': 'c3a47892d0'}}, {'success': {'createdAt': '2020-07-30 20:19:44', 'objectId': 'fa37e0ce97'}}]
Finished: SUCCESS
