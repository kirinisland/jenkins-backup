Started by timer
Running as SYSTEM
Building in workspace /var/root/.jenkins/workspace/hot_user
using credential root
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url git@github.com:kirinisland/zaoci-tool.git # timeout=10
Fetching upstream changes from git@github.com:kirinisland/zaoci-tool.git
 > git --version # timeout=10
using GIT_SSH to set credentials 
 > git fetch --tags --force --progress -- git@github.com:kirinisland/zaoci-tool.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
Commit message: "Update job with total count"
 > git rev-list --no-walk cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
[hot_user] $ /bin/sh -xe /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/jenkins1214916672598259842.sh
+ python3 jobs/hot_user.py --count 25
Hot users after date: 2020-07-31 00:00:00
点赞最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-31 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-likeCount
[('a66515e322', 11, 8, 0, 3), ('b45a115826', 6, 5, 0, 1), ('04fbe0c3e3', 11, 5, 4, 2), ('cb93241614', 8, 5, 1, 2), ('b45a115826', 6, 4, 1, 1), ('e854ee4e18', 6, 4, 0, 2), ('b45a115826', 5, 3, 0, 2), ('7de4c77a52', 6, 3, 1, 2), ('159bc8ca92', 8, 3, 1, 4), ('5acd18807f', 3, 3, 0, 0), ('1731de9260', 4, 3, 0, 1), ('eb8579289a', 4, 3, 0, 1), ('492ac880d0', 3, 2, 0, 1), ('79051f8ed3', 1, 2, 0, -1), ('548aa74e9a', 3, 2, 0, 1), ('6d7c75b9e1', 3, 2, 0, 1), ('b9f9dd75f0', 1, 1, 0, 0), ('7626c12b6c', 1, 1, 0, 0), ('fb8c71fb6f', 1, 1, 0, 0), ('fb8c71fb6f', 1, 1, 0, 0), ('8eef9ee690', 3, 1, 0, 2), ('5acd18807f', 1, 1, 0, 0), ('a4a4fc8f01', -3, -1, 0, -2), ('181952b4bf', 0, 0, 0, 0), ('fede3c986b', 0, 0, 0, 0)]

评论最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-31 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-commentCount
[('04fbe0c3e3', 11, 5, 4, 2), ('b45a115826', 6, 4, 1, 1), ('7de4c77a52', 6, 3, 1, 2), ('159bc8ca92', 8, 3, 1, 4), ('cb93241614', 8, 5, 1, 2), ('492ac880d0', 3, 2, 0, 1), ('181952b4bf', 0, 0, 0, 0), ('fede3c986b', 0, 0, 0, 0), ('79051f8ed3', 1, 2, 0, -1), ('b53adcf77b', 0, 0, 0, 0), ('b9f9dd75f0', 1, 1, 0, 0), ('12168f10c7', 0, 0, 0, 0), ('b45a115826', 6, 5, 0, 1), ('b45a115826', 5, 3, 0, 2), ('7626c12b6c', 1, 1, 0, 0), ('7626c12b6c', 0, 0, 0, 0), ('548aa74e9a', 3, 2, 0, 1), ('b53adcf77b', 0, 0, 0, 0), ('f63ff275bd', 0, 0, 0, 0), ('5acd18807f', 3, 3, 0, 0), ('6d7c75b9e1', 3, 2, 0, 1), ('fb8c71fb6f', 1, 1, 0, 0), ('a4a4fc8f01', -3, -1, 0, -2), ('fb8c71fb6f', 1, 1, 0, 0), ('a66515e322', 11, 8, 0, 3)]

收藏最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-31 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-bookmarkCount
[('159bc8ca92', 8, 3, 1, 4), ('a66515e322', 11, 8, 0, 3), ('b45a115826', 5, 3, 0, 2), ('04fbe0c3e3', 11, 5, 4, 2), ('7de4c77a52', 6, 3, 1, 2), ('8eef9ee690', 3, 1, 0, 2), ('e854ee4e18', 6, 4, 0, 2), ('cb93241614', 8, 5, 1, 2), ('492ac880d0', 3, 2, 0, 1), ('b45a115826', 6, 4, 1, 1), ('b45a115826', 6, 5, 0, 1), ('548aa74e9a', 3, 2, 0, 1), ('6d7c75b9e1', 3, 2, 0, 1), ('1731de9260', 4, 3, 0, 1), ('eb8579289a', 4, 3, 0, 1), ('79051f8ed3', 1, 2, 0, -1), ('a4a4fc8f01', -3, -1, 0, -2), ('181952b4bf', 0, 0, 0, 0), ('fede3c986b', 0, 0, 0, 0), ('b53adcf77b', 0, 0, 0, 0), ('b9f9dd75f0', 1, 1, 0, 0), ('12168f10c7', 0, 0, 0, 0), ('7626c12b6c', 1, 1, 0, 0), ('7626c12b6c', 0, 0, 0, 0), ('b53adcf77b', 0, 0, 0, 0)]
{'a66515e322': (33, 24, 0, 9, {'bookmarkCount', 'likeCount', 'commentCount'}), 'b45a115826': (51, 36, 3, 12, {'bookmarkCount', 'likeCount', 'commentCount'}), '04fbe0c3e3': (33, 15, 12, 6, {'bookmarkCount', 'likeCount', 'commentCount'}), 'cb93241614': (24, 15, 3, 6, {'bookmarkCount', 'likeCount', 'commentCount'}), 'e854ee4e18': (12, 8, 0, 4, {'bookmarkCount', 'likeCount'}), '7de4c77a52': (18, 9, 3, 6, {'bookmarkCount', 'likeCount', 'commentCount'}), '159bc8ca92': (24, 9, 3, 12, {'bookmarkCount', 'likeCount', 'commentCount'}), '5acd18807f': (7, 7, 0, 0, {'likeCount', 'commentCount'}), '1731de9260': (8, 6, 0, 2, {'bookmarkCount', 'likeCount'}), 'eb8579289a': (8, 6, 0, 2, {'bookmarkCount', 'likeCount'}), '492ac880d0': (9, 6, 0, 3, {'bookmarkCount', 'likeCount', 'commentCount'}), '79051f8ed3': (3, 6, 0, -3, {'bookmarkCount', 'likeCount', 'commentCount'}), '548aa74e9a': (9, 6, 0, 3, {'bookmarkCount', 'likeCount', 'commentCount'}), '6d7c75b9e1': (9, 6, 0, 3, {'bookmarkCount', 'likeCount', 'commentCount'}), 'b9f9dd75f0': (3, 3, 0, 0, {'bookmarkCount', 'likeCount', 'commentCount'}), '7626c12b6c': (3, 3, 0, 0, {'bookmarkCount', 'likeCount', 'commentCount'}), 'fb8c71fb6f': (4, 4, 0, 0, {'likeCount', 'commentCount'}), '8eef9ee690': (6, 2, 0, 4, {'bookmarkCount', 'likeCount'}), 'a4a4fc8f01': (-9, -3, 0, -6, {'bookmarkCount', 'likeCount', 'commentCount'}), '181952b4bf': (0, 0, 0, 0, {'bookmarkCount', 'likeCount', 'commentCount'}), 'fede3c986b': (0, 0, 0, 0, {'bookmarkCount', 'likeCount', 'commentCount'}), 'b53adcf77b': (0, 0, 0, 0, {'bookmarkCount', 'commentCount'}), '12168f10c7': (0, 0, 0, 0, {'bookmarkCount', 'commentCount'}), 'f63ff275bd': (0, 0, 0, 0, {'commentCount'})}
Total hot users count after date: 2020-07-31 00:00:00: 24
[{'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '5348752ccc'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '50089e755b'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': 'c9b64f22b5'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': 'cf6e471236'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '5b150eeb48'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '6f52091829'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '275f882725'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '41fef54b59'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': 'd56b486247'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '912b258746'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '2adb6db33a'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '9e80d81602'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '57225ba548'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '1dffb46e67'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '8e56b5c520'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': 'ba278e96ea'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '7a1204468e'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '053dcb1230'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '0ffe91c1f8'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '369eef29a3'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '17f193257b'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '3cc16cdae8'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': 'cd703b0787'}}, {'success': {'createdAt': '2020-08-07 20:20:00', 'objectId': '12eca47398'}}]
Finished: SUCCESS
