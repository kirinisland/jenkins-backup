Started by timer
Running as SYSTEM
Building in workspace /var/root/.jenkins/workspace/hot_user
using credential root
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url git@github.com:kirinisland/zaoci-tool.git # timeout=10
Fetching upstream changes from git@github.com:kirinisland/zaoci-tool.git
 > git --version # timeout=10
using GIT_SSH to set credentials 
 > git fetch --tags --force --progress -- git@github.com:kirinisland/zaoci-tool.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
Commit message: "Update job with total count"
 > git rev-list --no-walk cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
[hot_user] $ /bin/sh -xe /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/jenkins2002041154632383966.sh
+ python3 jobs/hot_user.py --count 25
Hot users after date: 2020-07-25 00:00:00
点赞最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-25 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-likeCount
[('a66515e322', 10, 5, 3, 2), ('6533a667a4', 8, 4, 3, 1), ('0388a01dc6', 5, 4, 1, 0), ('fb582eca76', 7, 3, 2, 2), ('cd32d80f90', 8, 3, 4, 1), ('e2f31cdddd', 4, 3, 0, 1), ('1f71e5548f', 5, 3, 0, 2), ('120322fb86', 4, 3, 0, 1), ('cd32d80f90', 3, 3, 0, 0), ('eb8579289a', 4, 3, 0, 1), ('a2f1710d52', 2, 2, 0, 0), ('47d8eb4fe3', 3, 2, 0, 1), ('181952b4bf', 3, 2, 0, 1), ('e260a83635', 3, 2, 0, 1), ('58f68b0e84', 3, 2, 1, 0), ('cd32d80f90', 2, 2, 0, 0), ('cd32d80f90', 0, 2, 0, -2), ('492ac880d0', 3, 2, 0, 1), ('492ac880d0', 3, 2, 0, 1), ('492ac880d0', 3, 2, 0, 1), ('4ac37e89bf', 3, 1, 0, 2), ('c7eecb433c', 1, 1, 0, 0), ('5acd18807f', 1, 1, 0, 0), ('0388a01dc6', 1, 1, 0, 0), ('05b80cbc3d', 1, 1, 0, 0)]

评论最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-25 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-commentCount
[('cd32d80f90', 8, 3, 4, 1), ('6533a667a4', 8, 4, 3, 1), ('a66515e322', 10, 5, 3, 2), ('fb582eca76', 7, 3, 2, 2), ('0388a01dc6', 5, 4, 1, 0), ('58f68b0e84', 3, 2, 1, 0), ('a2f1710d52', 2, 2, 0, 0), ('314124ce49', 0, 0, 0, 0), ('181952b4bf', 0, 0, 0, 0), ('3677667398', 0, 0, 0, 0), ('9eac8db707', 0, 0, 0, 0), ('47d8eb4fe3', 3, 2, 0, 1), ('4ac37e89bf', 3, 1, 0, 2), ('c7eecb433c', 1, 1, 0, 0), ('5acd18807f', 1, 1, 0, 0), ('0388a01dc6', 1, 1, 0, 0), ('05b80cbc3d', 1, 1, 0, 0), ('181952b4bf', 3, 2, 0, 1), ('e260a83635', 3, 2, 0, 1), ('ccfcee616a', 1, 1, 0, 0), ('34d4dcb0f9', 1, 1, 0, 0), ('58bd4a685e', 1, 1, 0, 0), ('cd32d80f90', 1, 1, 0, 0), ('58f68b0e84', 2, 1, 0, 1), ('cd32d80f90', 2, 2, 0, 0)]

收藏最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-25 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-bookmarkCount
[('fb582eca76', 7, 3, 2, 2), ('4ac37e89bf', 3, 1, 0, 2), ('a66515e322', 10, 5, 3, 2), ('1f71e5548f', 5, 3, 0, 2), ('98db299a8f', 3, 1, 0, 2), ('6533a667a4', 8, 4, 3, 1), ('47d8eb4fe3', 3, 2, 0, 1), ('181952b4bf', 3, 2, 0, 1), ('e260a83635', 3, 2, 0, 1), ('58f68b0e84', 2, 1, 0, 1), ('cd32d80f90', 8, 3, 4, 1), ('e2f31cdddd', 4, 3, 0, 1), ('120322fb86', 4, 3, 0, 1), ('492ac880d0', 3, 2, 0, 1), ('eb8579289a', 4, 3, 0, 1), ('492ac880d0', 3, 2, 0, 1), ('cd32d80f90', 2, 1, 0, 1), ('492ac880d0', 3, 2, 0, 1), ('a2f1710d52', 2, 2, 0, 0), ('0388a01dc6', 5, 4, 1, 0), ('79051f8ed3', 0, 1, 0, -1), ('cd32d80f90', 0, 2, 0, -2), ('9ac0ff71fc', -1, 1, 0, -2), ('314124ce49', 0, 0, 0, 0), ('181952b4bf', 0, 0, 0, 0)]
{'a66515e322': (30, 15, 9, 6, {'commentCount', 'likeCount', 'bookmarkCount'}), '6533a667a4': (24, 12, 9, 3, {'commentCount', 'likeCount', 'bookmarkCount'}), '0388a01dc6': (17, 14, 3, 0, {'commentCount', 'likeCount', 'bookmarkCount'}), 'fb582eca76': (21, 9, 6, 6, {'commentCount', 'likeCount', 'bookmarkCount'}), 'cd32d80f90': (34, 22, 12, 0, {'commentCount', 'likeCount', 'bookmarkCount'}), 'e2f31cdddd': (8, 6, 0, 2, {'likeCount', 'bookmarkCount'}), '1f71e5548f': (10, 6, 0, 4, {'likeCount', 'bookmarkCount'}), '120322fb86': (8, 6, 0, 2, {'likeCount', 'bookmarkCount'}), 'eb8579289a': (8, 6, 0, 2, {'likeCount', 'bookmarkCount'}), 'a2f1710d52': (6, 6, 0, 0, {'commentCount', 'likeCount', 'bookmarkCount'}), '47d8eb4fe3': (9, 6, 0, 3, {'commentCount', 'likeCount', 'bookmarkCount'}), '181952b4bf': (9, 6, 0, 3, {'commentCount', 'likeCount', 'bookmarkCount'}), 'e260a83635': (9, 6, 0, 3, {'commentCount', 'likeCount', 'bookmarkCount'}), '58f68b0e84': (10, 6, 2, 2, {'commentCount', 'likeCount', 'bookmarkCount'}), '492ac880d0': (18, 12, 0, 6, {'likeCount', 'bookmarkCount'}), '4ac37e89bf': (9, 3, 0, 6, {'commentCount', 'likeCount', 'bookmarkCount'}), 'c7eecb433c': (2, 2, 0, 0, {'commentCount', 'likeCount'}), '5acd18807f': (2, 2, 0, 0, {'commentCount', 'likeCount'}), '05b80cbc3d': (2, 2, 0, 0, {'commentCount', 'likeCount'}), '314124ce49': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'}), '3677667398': (0, 0, 0, 0, {'commentCount'}), '9eac8db707': (0, 0, 0, 0, {'commentCount'}), 'ccfcee616a': (1, 1, 0, 0, {'commentCount'}), '34d4dcb0f9': (1, 1, 0, 0, {'commentCount'}), '58bd4a685e': (1, 1, 0, 0, {'commentCount'}), '98db299a8f': (3, 1, 0, 2, {'bookmarkCount'}), '79051f8ed3': (0, 1, 0, -1, {'bookmarkCount'}), '9ac0ff71fc': (-1, 1, 0, -2, {'bookmarkCount'})}
Total hot users count after date: 2020-07-25 00:00:00: 28
[{'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': 'e8aec35afd'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '4e4283387b'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '4260a3d7dc'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': 'f722ae562c'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '033ea5fa26'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '99aef77056'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '8501d65786'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '13d422942b'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': 'dc21e9090c'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '65ad40456b'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': 'c78672b3bf'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': 'cc5a0fb11a'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '7c27781c61'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '984f09a5d2'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '22877c1b38'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '0c05b1f7d2'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': 'cefedc8738'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': 'a409c4249a'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '85c3d362c7'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '85ff7c7fa7'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': 'f60c3756f8'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': 'c239501c74'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '54beeabc52'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '1552568b22'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': 'e6568f8f9b'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': 'd6c89e5e27'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': 'b6d9d091ca'}}, {'success': {'createdAt': '2020-08-01 20:19:45', 'objectId': '0a9d87cd45'}}]
Finished: SUCCESS
