Started by timer
Running as SYSTEM
Building in workspace /var/root/.jenkins/workspace/hot_user
using credential root
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url git@github.com:kirinisland/zaoci-tool.git # timeout=10
Fetching upstream changes from git@github.com:kirinisland/zaoci-tool.git
 > git --version # timeout=10
using GIT_SSH to set credentials 
 > git fetch --tags --force --progress -- git@github.com:kirinisland/zaoci-tool.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
Commit message: "Update job with total count"
 > git rev-list --no-walk cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
[hot_user] $ /bin/sh -xe /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/jenkins6725085962961098102.sh
+ python3 jobs/hot_user.py --count 25
Hot users after date: 2020-08-18 00:00:00
点赞最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-08-18 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-likeCount
[('6533a667a4', 9, 6, 0, 3), ('6533a667a4', 9, 5, 3, 1), ('f7b0d6bd19', 6, 5, 0, 1), ('31cf880bdf', 6, 5, 0, 1), ('a66515e322', 8, 5, 1, 2), ('3061741a16', 6, 4, 0, 2), ('4fa7155b47', 5, 4, 0, 1), ('13961fc31c', 4, 3, 0, 1), ('a66515e322', 6, 3, 0, 3), ('9ab054e1f9', 5, 3, 0, 2), ('c9e9403703', 3, 3, 0, 0), ('8d33d860d4', 5, 3, 0, 2), ('1609556623', 3, 3, 0, 0), ('f3b00e4ee0', 4, 3, 0, 1), ('13d70a56bb', 5, 3, 1, 1), ('8630f34a25', 5, 2, 0, 3), ('6533a667a4', 3, 2, 1, 0), ('1609556623', 2, 2, 0, 0), ('1609556623', 2, 2, 0, 0), ('b431ef6412', 2, 2, 0, 0), ('171e219569', 2, 2, 0, 0), ('b431ef6412', 1, 1, 0, 0), ('a66515e322', 2, 1, 0, 1), ('181952b4bf', 1, 1, 0, 0), ('31cf880bdf', 1, 1, 0, 0)]

评论最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-08-18 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-commentCount
[('6533a667a4', 9, 5, 3, 1), ('6533a667a4', 3, 2, 1, 0), ('13d70a56bb', 5, 3, 1, 1), ('a66515e322', 8, 5, 1, 2), ('5cd3f2f927', 2, 1, 1, 0), ('13961fc31c', 4, 3, 0, 1), ('8630f34a25', 5, 2, 0, 3), ('3061741a16', 6, 4, 0, 2), ('b431ef6412', 1, 1, 0, 0), ('a66515e322', 2, 1, 0, 1), ('a66515e322', 6, 3, 0, 3), ('495b52e760', -2, 0, 0, -2), ('181952b4bf', 1, 1, 0, 0), ('f7b0d6bd19', 6, 5, 0, 1), ('9ab054e1f9', 5, 3, 0, 2), ('c9e9403703', 3, 3, 0, 0), ('31cf880bdf', 6, 5, 0, 1), ('31cf880bdf', 1, 1, 0, 0), ('4fa7155b47', 5, 4, 0, 1), ('7fb46b7dec', 2, 1, 0, 1), ('8d33d860d4', 5, 3, 0, 2), ('63416f8c6a', 1, 1, 0, 0), ('1609556623', 2, 2, 0, 0), ('b4407d110d', 0, 0, 0, 0), ('1609556623', 3, 3, 0, 0)]

收藏最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-08-18 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-bookmarkCount
[('8630f34a25', 5, 2, 0, 3), ('a66515e322', 6, 3, 0, 3), ('6533a667a4', 9, 6, 0, 3), ('3061741a16', 6, 4, 0, 2), ('9ab054e1f9', 5, 3, 0, 2), ('8d33d860d4', 5, 3, 0, 2), ('a66515e322', 8, 5, 1, 2), ('13961fc31c', 4, 3, 0, 1), ('6533a667a4', 9, 5, 3, 1), ('a66515e322', 2, 1, 0, 1), ('f7b0d6bd19', 6, 5, 0, 1), ('31cf880bdf', 6, 5, 0, 1), ('4fa7155b47', 5, 4, 0, 1), ('7fb46b7dec', 2, 1, 0, 1), ('f3b00e4ee0', 4, 3, 0, 1), ('13d70a56bb', 5, 3, 1, 1), ('1609556623', 3, 3, 0, 0), ('495b52e760', -2, 0, 0, -2), ('b431ef6412', 1, 1, 0, 0), ('181952b4bf', 1, 1, 0, 0), ('c9e9403703', 3, 3, 0, 0), ('6533a667a4', 3, 2, 1, 0), ('31cf880bdf', 1, 1, 0, 0), ('63416f8c6a', 1, 1, 0, 0), ('1609556623', 2, 2, 0, 0)]
{'6533a667a4': (54, 33, 12, 9, {'likeCount', 'commentCount', 'bookmarkCount'}), 'f7b0d6bd19': (18, 15, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '31cf880bdf': (21, 18, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), 'a66515e322': (48, 27, 3, 18, {'likeCount', 'commentCount', 'bookmarkCount'}), '3061741a16': (18, 12, 0, 6, {'likeCount', 'commentCount', 'bookmarkCount'}), '4fa7155b47': (15, 12, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '13961fc31c': (12, 9, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '9ab054e1f9': (15, 9, 0, 6, {'likeCount', 'commentCount', 'bookmarkCount'}), 'c9e9403703': (9, 9, 0, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), '8d33d860d4': (15, 9, 0, 6, {'likeCount', 'commentCount', 'bookmarkCount'}), '1609556623': (17, 17, 0, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), 'f3b00e4ee0': (8, 6, 0, 2, {'likeCount', 'bookmarkCount'}), '13d70a56bb': (15, 9, 3, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '8630f34a25': (15, 6, 0, 9, {'likeCount', 'commentCount', 'bookmarkCount'}), 'b431ef6412': (5, 5, 0, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), '171e219569': (2, 2, 0, 0, {'likeCount'}), '181952b4bf': (3, 3, 0, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), '5cd3f2f927': (2, 1, 1, 0, {'commentCount'}), '495b52e760': (-4, 0, 0, -4, {'commentCount', 'bookmarkCount'}), '7fb46b7dec': (4, 2, 0, 2, {'commentCount', 'bookmarkCount'}), '63416f8c6a': (2, 2, 0, 0, {'commentCount', 'bookmarkCount'}), 'b4407d110d': (0, 0, 0, 0, {'commentCount'})}
Total hot users count after date: 2020-08-18 00:00:00: 22
[{'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': 'a7116ebd37'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': 'a8894e2cbd'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': '34934f6b23'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': 'be40da8e0e'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': 'da67cd111d'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': 'a857e804fd'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': '8e25e56551'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': '036eaede3b'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': '0a656713c7'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': 'ff5cc332e5'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': 'bb782e783e'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': '5862225bbb'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': '7947ec7d94'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': '3046a6c5e3'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': 'e06d474403'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': '43026dab90'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': 'd1a4570878'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': 'cd097e124e'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': 'ba1ce5fe6f'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': '5aeb010c55'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': '762db53562'}}, {'success': {'createdAt': '2020-08-25 20:19:41', 'objectId': '7d59198bd1'}}]
Finished: SUCCESS
