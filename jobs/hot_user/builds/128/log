Started by timer
Running as SYSTEM
Building in workspace /var/root/.jenkins/workspace/hot_user
using credential root
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url git@github.com:kirinisland/zaoci-tool.git # timeout=10
Fetching upstream changes from git@github.com:kirinisland/zaoci-tool.git
 > git --version # timeout=10
using GIT_SSH to set credentials 
 > git fetch --tags --force --progress -- git@github.com:kirinisland/zaoci-tool.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
Commit message: "Update job with total count"
 > git rev-list --no-walk cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
[hot_user] $ /bin/sh -xe /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/jenkins5647811123912412261.sh
+ python3 jobs/hot_user.py --count 25
Hot users after date: 2020-08-03 00:00:00
点赞最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-08-03 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-likeCount
[('04fbe0c3e3', 8, 4, 2, 2), ('7de4c77a52', 6, 3, 1, 2), ('159bc8ca92', 8, 3, 1, 4), ('e854ee4e18', 5, 3, 0, 2), ('1731de9260', 4, 3, 0, 1), ('eb8579289a', 4, 3, 0, 1), ('7e39dfea3a', 6, 3, 0, 3), ('c9e9403703', 4, 3, 0, 1), ('6d7c75b9e1', 3, 2, 0, 1), ('561fe5c25f', 4, 2, 1, 1), ('f8da153c27', 3, 2, 0, 1), ('f8da153c27', 4, 2, 0, 2), ('f8da153c27', 5, 2, 1, 2), ('d4acd875a5', 3, 2, 1, 0), ('a66515e322', 3, 2, 1, 0), ('181952b4bf', 5, 2, 2, 1), ('26c033357a', 3, 2, 1, 0), ('8eef9ee690', 3, 1, 0, 2), ('397f03568c', 0, 1, 0, -1), ('91b1a2cb8c', 1, 1, 0, 0), ('1e0923140a', 1, 1, 0, 0), ('e98f327786', 2, 1, 0, 1), ('58f68b0e84', 1, 1, 0, 0), ('b4407d110d', 1, 1, 0, 0), ('b4407d110d', 1, 1, 0, 0)]

评论最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-08-03 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-commentCount
[('f8da153c27', 2, 0, 2, 0), ('181952b4bf', 5, 2, 2, 1), ('04fbe0c3e3', 8, 4, 2, 2), ('7de4c77a52', 6, 3, 1, 2), ('159bc8ca92', 8, 3, 1, 4), ('561fe5c25f', 4, 2, 1, 1), ('f8da153c27', 5, 2, 1, 2), ('d4acd875a5', 3, 2, 1, 0), ('a66515e322', 3, 2, 1, 0), ('26c033357a', 3, 2, 1, 0), ('26c033357a', 2, 1, 1, 0), ('6d7c75b9e1', 3, 2, 0, 1), ('8eef9ee690', 3, 1, 0, 2), ('3456831d65', 0, 0, 0, 0), ('e854ee4e18', 5, 3, 0, 2), ('1731de9260', 4, 3, 0, 1), ('eb8579289a', 4, 3, 0, 1), ('5acd18807f', 0, 0, 0, 0), ('397f03568c', 0, 1, 0, -1), ('4bc4ab71e4', 0, 0, 0, 0), ('91b1a2cb8c', 1, 1, 0, 0), ('f8da153c27', 3, 2, 0, 1), ('1e0923140a', 1, 1, 0, 0), ('e98f327786', 2, 1, 0, 1), ('f8da153c27', 4, 2, 0, 2)]

收藏最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-08-03 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-bookmarkCount
[('159bc8ca92', 8, 3, 1, 4), ('7e39dfea3a', 6, 3, 0, 3), ('7de4c77a52', 6, 3, 1, 2), ('8eef9ee690', 3, 1, 0, 2), ('e854ee4e18', 5, 3, 0, 2), ('f8da153c27', 4, 2, 0, 2), ('f8da153c27', 5, 2, 1, 2), ('548aa74e9a', 3, 1, 0, 2), ('04fbe0c3e3', 8, 4, 2, 2), ('6d7c75b9e1', 3, 2, 0, 1), ('1731de9260', 4, 3, 0, 1), ('eb8579289a', 4, 3, 0, 1), ('561fe5c25f', 4, 2, 1, 1), ('f8da153c27', 3, 2, 0, 1), ('e98f327786', 2, 1, 0, 1), ('181952b4bf', 5, 2, 2, 1), ('c9e9403703', 4, 3, 0, 1), ('397f03568c', 0, 1, 0, -1), ('3456831d65', 0, 0, 0, 0), ('5acd18807f', 0, 0, 0, 0), ('4bc4ab71e4', 0, 0, 0, 0), ('91b1a2cb8c', 1, 1, 0, 0), ('1e0923140a', 1, 1, 0, 0), ('f8da153c27', 0, 0, 0, 0), ('f8da153c27', 2, 0, 2, 0)]
{'04fbe0c3e3': (24, 12, 6, 6, {'commentCount', 'likeCount', 'bookmarkCount'}), '7de4c77a52': (18, 9, 3, 6, {'commentCount', 'likeCount', 'bookmarkCount'}), '159bc8ca92': (24, 9, 3, 12, {'commentCount', 'likeCount', 'bookmarkCount'}), 'e854ee4e18': (15, 9, 0, 6, {'commentCount', 'likeCount', 'bookmarkCount'}), '1731de9260': (12, 9, 0, 3, {'commentCount', 'likeCount', 'bookmarkCount'}), 'eb8579289a': (12, 9, 0, 3, {'commentCount', 'likeCount', 'bookmarkCount'}), '7e39dfea3a': (12, 6, 0, 6, {'likeCount', 'bookmarkCount'}), 'c9e9403703': (8, 6, 0, 2, {'likeCount', 'bookmarkCount'}), '6d7c75b9e1': (9, 6, 0, 3, {'commentCount', 'likeCount', 'bookmarkCount'}), '561fe5c25f': (12, 6, 3, 3, {'commentCount', 'likeCount', 'bookmarkCount'}), 'f8da153c27': (40, 18, 7, 15, {'commentCount', 'likeCount', 'bookmarkCount'}), 'd4acd875a5': (6, 4, 2, 0, {'commentCount', 'likeCount'}), 'a66515e322': (6, 4, 2, 0, {'commentCount', 'likeCount'}), '181952b4bf': (15, 6, 6, 3, {'commentCount', 'likeCount', 'bookmarkCount'}), '26c033357a': (8, 5, 3, 0, {'commentCount', 'likeCount'}), '8eef9ee690': (9, 3, 0, 6, {'commentCount', 'likeCount', 'bookmarkCount'}), '397f03568c': (0, 3, 0, -3, {'commentCount', 'likeCount', 'bookmarkCount'}), '91b1a2cb8c': (3, 3, 0, 0, {'commentCount', 'likeCount', 'bookmarkCount'}), '1e0923140a': (3, 3, 0, 0, {'commentCount', 'likeCount', 'bookmarkCount'}), 'e98f327786': (6, 3, 0, 3, {'commentCount', 'likeCount', 'bookmarkCount'}), '58f68b0e84': (1, 1, 0, 0, {'likeCount'}), 'b4407d110d': (2, 2, 0, 0, {'likeCount'}), '3456831d65': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'}), '5acd18807f': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'}), '4bc4ab71e4': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'}), '548aa74e9a': (3, 1, 0, 2, {'bookmarkCount'})}
Total hot users count after date: 2020-08-03 00:00:00: 26
[{'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '014c1d047f'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '0ff99dedc7'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '5f4ea8e90b'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '81fb816f09'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': 'fc88017a0e'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '4107ef3839'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': 'b3cdab98c8'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '0ce58e7d86'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': 'c0cc96f590'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': 'c13970602d'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '15c8bfad49'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': 'b6e5588599'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': 'fddaee9182'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '692a4fcc1a'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '823ad0b5b6'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '0ada5465f4'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': 'f7087abb78'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '1fd2c5a6c9'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '1933bfc7f5'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': 'fd1278d7c7'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': 'c8a0a57e8d'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '1d583c3619'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '8a97bb7cad'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '0470218245'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': '8c0d89ffea'}}, {'success': {'createdAt': '2020-08-10 20:20:13', 'objectId': 'd033566363'}}]
Finished: SUCCESS
