Started by timer
Running as SYSTEM
Building in workspace /var/root/.jenkins/workspace/hot_user
using credential root
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url git@github.com:kirinisland/zaoci-tool.git # timeout=10
Fetching upstream changes from git@github.com:kirinisland/zaoci-tool.git
 > git --version # timeout=10
using GIT_SSH to set credentials 
 > git fetch --tags --force --progress -- git@github.com:kirinisland/zaoci-tool.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
Commit message: "Update job with total count"
 > git rev-list --no-walk cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
[hot_user] $ /bin/sh -xe /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/jenkins300569394879042909.sh
+ python3 jobs/hot_user.py --count 25
Hot users after date: 2020-08-02 00:00:00
点赞最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-08-02 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-likeCount
[('548aa74e9a', 4, 3, 0, 1), ('7de4c77a52', 6, 3, 1, 2), ('159bc8ca92', 8, 3, 1, 4), ('e854ee4e18', 5, 3, 0, 2), ('1731de9260', 4, 3, 0, 1), ('eb8579289a', 4, 3, 0, 1), ('7e39dfea3a', 5, 3, 0, 2), ('6d7c75b9e1', 3, 2, 0, 1), ('561fe5c25f', 4, 2, 1, 1), ('f8da153c27', 3, 2, 0, 1), ('a66515e322', 2, 2, 0, 0), ('26c033357a', 3, 2, 1, 0), ('04fbe0c3e3', 6, 2, 2, 2), ('c9e9403703', 3, 2, 0, 1), ('8eef9ee690', 3, 1, 0, 2), ('397f03568c', 0, 1, 0, -1), ('91b1a2cb8c', 1, 1, 0, 0), ('1e0923140a', 1, 1, 0, 0), ('e98f327786', 1, 1, 0, 0), ('f8da153c27', 3, 1, 0, 2), ('58f68b0e84', 1, 1, 0, 0), ('d4acd875a5', 1, 1, 0, 0), ('b4407d110d', 1, 1, 0, 0), ('b4407d110d', 1, 1, 0, 0), ('cb93241614', 1, 1, 0, 0)]

评论最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-08-02 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-commentCount
[('f8da153c27', 2, 0, 2, 0), ('04fbe0c3e3', 6, 2, 2, 2), ('7de4c77a52', 6, 3, 1, 2), ('159bc8ca92', 8, 3, 1, 4), ('561fe5c25f', 4, 2, 1, 1), ('26c033357a', 3, 2, 1, 0), ('548aa74e9a', 4, 3, 0, 1), ('b53adcf77b', 0, 0, 0, 0), ('f63ff275bd', 0, 0, 0, 0), ('6d7c75b9e1', 3, 2, 0, 1), ('8eef9ee690', 3, 1, 0, 2), ('3456831d65', 0, 0, 0, 0), ('e854ee4e18', 5, 3, 0, 2), ('1731de9260', 4, 3, 0, 1), ('eb8579289a', 4, 3, 0, 1), ('5acd18807f', 0, 0, 0, 0), ('397f03568c', 0, 1, 0, -1), ('4bc4ab71e4', 0, 0, 0, 0), ('91b1a2cb8c', 1, 1, 0, 0), ('f8da153c27', 3, 2, 0, 1), ('1e0923140a', 1, 1, 0, 0), ('e98f327786', 1, 1, 0, 0), ('f8da153c27', 3, 1, 0, 2), ('f8da153c27', 0, 0, 0, 0), ('f8da153c27', 1, 0, 0, 1)]

收藏最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-08-02 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-bookmarkCount
[('159bc8ca92', 8, 3, 1, 4), ('7de4c77a52', 6, 3, 1, 2), ('8eef9ee690', 3, 1, 0, 2), ('e854ee4e18', 5, 3, 0, 2), ('f8da153c27', 3, 1, 0, 2), ('7e39dfea3a', 5, 3, 0, 2), ('548aa74e9a', 3, 1, 0, 2), ('04fbe0c3e3', 6, 2, 2, 2), ('548aa74e9a', 4, 3, 0, 1), ('6d7c75b9e1', 3, 2, 0, 1), ('1731de9260', 4, 3, 0, 1), ('eb8579289a', 4, 3, 0, 1), ('561fe5c25f', 4, 2, 1, 1), ('f8da153c27', 3, 2, 0, 1), ('f8da153c27', 1, 0, 0, 1), ('c9e9403703', 3, 2, 0, 1), ('e98f327786', 1, 1, 0, 0), ('397f03568c', 0, 1, 0, -1), ('b53adcf77b', 0, 0, 0, 0), ('f63ff275bd', 0, 0, 0, 0), ('3456831d65', 0, 0, 0, 0), ('5acd18807f', 0, 0, 0, 0), ('4bc4ab71e4', 0, 0, 0, 0), ('91b1a2cb8c', 1, 1, 0, 0), ('1e0923140a', 1, 1, 0, 0)]
{'548aa74e9a': (15, 10, 0, 5, {'likeCount', 'commentCount', 'bookmarkCount'}), '7de4c77a52': (18, 9, 3, 6, {'likeCount', 'commentCount', 'bookmarkCount'}), '159bc8ca92': (24, 9, 3, 12, {'likeCount', 'commentCount', 'bookmarkCount'}), 'e854ee4e18': (15, 9, 0, 6, {'likeCount', 'commentCount', 'bookmarkCount'}), '1731de9260': (12, 9, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), 'eb8579289a': (12, 9, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '7e39dfea3a': (10, 6, 0, 4, {'likeCount', 'bookmarkCount'}), '6d7c75b9e1': (9, 6, 0, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), '561fe5c25f': (12, 6, 3, 3, {'likeCount', 'commentCount', 'bookmarkCount'}), 'f8da153c27': (22, 9, 2, 11, {'likeCount', 'commentCount', 'bookmarkCount'}), 'a66515e322': (2, 2, 0, 0, {'likeCount'}), '26c033357a': (6, 4, 2, 0, {'likeCount', 'commentCount'}), '04fbe0c3e3': (18, 6, 6, 6, {'likeCount', 'commentCount', 'bookmarkCount'}), 'c9e9403703': (6, 4, 0, 2, {'likeCount', 'bookmarkCount'}), '8eef9ee690': (9, 3, 0, 6, {'likeCount', 'commentCount', 'bookmarkCount'}), '397f03568c': (0, 3, 0, -3, {'likeCount', 'commentCount', 'bookmarkCount'}), '91b1a2cb8c': (3, 3, 0, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), '1e0923140a': (3, 3, 0, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), 'e98f327786': (3, 3, 0, 0, {'likeCount', 'commentCount', 'bookmarkCount'}), '58f68b0e84': (1, 1, 0, 0, {'likeCount'}), 'd4acd875a5': (1, 1, 0, 0, {'likeCount'}), 'b4407d110d': (2, 2, 0, 0, {'likeCount'}), 'cb93241614': (1, 1, 0, 0, {'likeCount'}), 'b53adcf77b': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'}), 'f63ff275bd': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'}), '3456831d65': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'}), '5acd18807f': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'}), '4bc4ab71e4': (0, 0, 0, 0, {'commentCount', 'bookmarkCount'})}
Total hot users count after date: 2020-08-02 00:00:00: 28
[{'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '05feb47c35'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': 'ae489c1282'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '72ad11afe3'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '0842df9622'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '31d6ebfc63'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': 'd1090f35d3'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '446d621cb5'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '581edeca13'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '6775bf373e'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '6fd67fd7e1'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': 'cc34ac9875'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': 'bb4ecb4a53'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': 'd02e7b13f4'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '79512dba9b'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '30445180b3'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': 'a4b85f9a59'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': 'b8b7cd2fcc'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '4203a70699'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '61826238cf'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '6acf246d29'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': 'f25d71c675'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': 'f31eb59454'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': 'd2a69d2849'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '63b30f0eb6'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': 'f2b5b8ab23'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '51115df095'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '87d4c46278'}}, {'success': {'createdAt': '2020-08-09 20:20:10', 'objectId': '51f44102a6'}}]
Finished: SUCCESS
