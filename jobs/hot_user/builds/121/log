Started by timer
Running as SYSTEM
Building in workspace /var/root/.jenkins/workspace/hot_user
using credential root
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url git@github.com:kirinisland/zaoci-tool.git # timeout=10
Fetching upstream changes from git@github.com:kirinisland/zaoci-tool.git
 > git --version # timeout=10
using GIT_SSH to set credentials 
 > git fetch --tags --force --progress -- git@github.com:kirinisland/zaoci-tool.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
 > git rev-parse refs/remotes/origin/origin/master^{commit} # timeout=10
Checking out Revision cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
Commit message: "Update job with total count"
 > git rev-list --no-walk cf16a3aa87695a697dfaf67fbcf21676c6ab4c7a # timeout=10
[hot_user] $ /bin/sh -xe /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/T/jenkins8051815616098984579.sh
+ python3 jobs/hot_user.py --count 25
Hot users after date: 2020-07-27 00:00:00
点赞最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-27 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-likeCount
[('a66515e322', 10, 5, 3, 2), ('cd32d80f90', 7, 5, 1, 1), ('eb8579289a', 5, 4, 0, 1), ('9ac0ff71fc', 3, 4, 0, -1), ('cd32d80f90', 8, 3, 4, 1), ('e2f31cdddd', 4, 3, 0, 1), ('1f71e5548f', 5, 3, 0, 2), ('120322fb86', 4, 3, 0, 1), ('492ac880d0', 6, 3, 0, 3), ('6b9fd674b5', 3, 3, 0, 0), ('cd32d80f90', 4, 3, 0, 1), ('181952b4bf', 3, 2, 0, 1), ('e260a83635', 3, 2, 0, 1), ('58bd4a685e', 2, 2, 0, 0), ('58f68b0e84', 3, 2, 1, 0), ('cd32d80f90', 2, 2, 0, 0), ('799c422540', 2, 2, 0, 0), ('cd32d80f90', 0, 2, 0, -2), ('492ac880d0', 4, 2, 0, 2), ('492ac880d0', 3, 2, 0, 1), ('79051f8ed3', 1, 2, 0, -1), ('05b80cbc3d', 1, 1, 0, 0), ('34d4dcb0f9', 1, 1, 0, 0), ('cd32d80f90', 1, 1, 0, 0), ('58f68b0e84', 2, 1, 0, 1)]

评论最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-27 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-commentCount
[('cd32d80f90', 8, 3, 4, 1), ('a66515e322', 10, 5, 3, 2), ('58f68b0e84', 3, 2, 1, 0), ('cd32d80f90', 7, 5, 1, 1), ('05b80cbc3d', 1, 1, 0, 0), ('181952b4bf', 3, 2, 0, 1), ('e260a83635', 3, 2, 0, 1), ('ccfcee616a', 1, 0, 0, 1), ('34d4dcb0f9', 1, 1, 0, 0), ('58bd4a685e', 2, 2, 0, 0), ('cd32d80f90', 1, 1, 0, 0), ('58f68b0e84', 2, 1, 0, 1), ('cd32d80f90', 2, 2, 0, 0), ('e2f31cdddd', 4, 3, 0, 1), ('1f71e5548f', 5, 3, 0, 2), ('0cf06a7086', 1, 1, 0, 0), ('120322fb86', 4, 3, 0, 1), ('47d8eb4fe3', 0, 0, 0, 0), ('f7b18b90d9', 0, 0, 0, 0), ('98db299a8f', 3, 1, 0, 2), ('799c422540', 2, 2, 0, 0), ('6d796b613e', 1, 1, 0, 0), ('c69070725f', 1, 1, 0, 0), ('cd32d80f90', 0, 2, 0, -2), ('492ac880d0', 4, 2, 0, 2)]

收藏最多: https://api2.bmob.cn/1/classes/EverydayLyric?&limit=25&where={"validStatus": {"$gte": 2, "$lte": 3}, "createdAt": {"$gte": {"__type": "Date", "iso": "2020-07-27 00:00:00"}}}&keys=user,likeCount,commentCount,bookmarkCount&order=-bookmarkCount
[('492ac880d0', 6, 3, 0, 3), ('a66515e322', 10, 5, 3, 2), ('1f71e5548f', 5, 3, 0, 2), ('98db299a8f', 3, 1, 0, 2), ('492ac880d0', 4, 2, 0, 2), ('181952b4bf', 3, 2, 0, 1), ('e260a83635', 3, 2, 0, 1), ('ccfcee616a', 1, 0, 0, 1), ('58f68b0e84', 2, 1, 0, 1), ('cd32d80f90', 8, 3, 4, 1), ('e2f31cdddd', 4, 3, 0, 1), ('120322fb86', 4, 3, 0, 1), ('cd32d80f90', 7, 5, 1, 1), ('eb8579289a', 5, 4, 0, 1), ('cd32d80f90', 4, 3, 0, 1), ('492ac880d0', 3, 2, 0, 1), ('9ac0ff71fc', 3, 4, 0, -1), ('79051f8ed3', 1, 2, 0, -1), ('cd32d80f90', 0, 2, 0, -2), ('05b80cbc3d', 1, 1, 0, 0), ('34d4dcb0f9', 1, 1, 0, 0), ('58bd4a685e', 2, 2, 0, 0), ('cd32d80f90', 1, 1, 0, 0), ('58f68b0e84', 3, 2, 1, 0), ('cd32d80f90', 2, 2, 0, 0)]
{'a66515e322': (30, 15, 9, 6, {'likeCount', 'bookmarkCount', 'commentCount'}), 'cd32d80f90': (62, 45, 15, 2, {'likeCount', 'bookmarkCount', 'commentCount'}), 'eb8579289a': (10, 8, 0, 2, {'likeCount', 'bookmarkCount'}), '9ac0ff71fc': (6, 8, 0, -2, {'likeCount', 'bookmarkCount'}), 'e2f31cdddd': (12, 9, 0, 3, {'likeCount', 'bookmarkCount', 'commentCount'}), '1f71e5548f': (15, 9, 0, 6, {'likeCount', 'bookmarkCount', 'commentCount'}), '120322fb86': (12, 9, 0, 3, {'likeCount', 'bookmarkCount', 'commentCount'}), '492ac880d0': (30, 16, 0, 14, {'likeCount', 'bookmarkCount', 'commentCount'}), '6b9fd674b5': (3, 3, 0, 0, {'likeCount'}), '181952b4bf': (9, 6, 0, 3, {'likeCount', 'bookmarkCount', 'commentCount'}), 'e260a83635': (9, 6, 0, 3, {'likeCount', 'bookmarkCount', 'commentCount'}), '58bd4a685e': (6, 6, 0, 0, {'likeCount', 'bookmarkCount', 'commentCount'}), '58f68b0e84': (15, 9, 3, 3, {'likeCount', 'bookmarkCount', 'commentCount'}), '799c422540': (4, 4, 0, 0, {'likeCount', 'commentCount'}), '79051f8ed3': (2, 4, 0, -2, {'likeCount', 'bookmarkCount'}), '05b80cbc3d': (3, 3, 0, 0, {'likeCount', 'bookmarkCount', 'commentCount'}), '34d4dcb0f9': (3, 3, 0, 0, {'likeCount', 'bookmarkCount', 'commentCount'}), 'ccfcee616a': (2, 0, 0, 2, {'bookmarkCount', 'commentCount'}), '0cf06a7086': (1, 1, 0, 0, {'commentCount'}), '47d8eb4fe3': (0, 0, 0, 0, {'commentCount'}), 'f7b18b90d9': (0, 0, 0, 0, {'commentCount'}), '98db299a8f': (6, 2, 0, 4, {'bookmarkCount', 'commentCount'}), '6d796b613e': (1, 1, 0, 0, {'commentCount'}), 'c69070725f': (1, 1, 0, 0, {'commentCount'})}
Total hot users count after date: 2020-07-27 00:00:00: 24
[{'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': '59153e7b2e'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': 'c724cfb9ec'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': '73283612eb'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': '40cbad3017'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': 'a94c3c8aef'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': '6bc4e87fe0'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': 'e0d8a03083'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': 'cc61082472'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': '210af61920'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': '2419df5933'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': 'c814d83f5e'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': 'c2cd8e403d'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': 'b53e5e580e'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': '83a9af4981'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': 'dc484bcc22'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': 'd429f40b12'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': '05d042a189'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': 'a49eb3bf5d'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': 'b8866167c2'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': 'd5c5392062'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': 'e274a70507'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': '680350fc63'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': '1144d0c34d'}}, {'success': {'createdAt': '2020-08-03 20:19:53', 'objectId': '3b83d28ca9'}}]
Finished: SUCCESS
